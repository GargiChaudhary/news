<!DOCTYPE html>
<html>
<head>
    <title>tree test</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        .title {
            height: 100px;
            width: 100%;
            border: 1px solid red;
            margin: 0 auto;
            text-align: center;
            line-height: 100px;
        }

        .content {
            width: 90%;
            margin: 0 auto;
            border: 1px solid green;
            min-height: 400px;
        }

        .type-list {
            float: left;
            width: 16%;
            height: auto;
            border: 1px solid black;
        }

        .main {
            float: right;
            width: 83%;
            height: auto;
            border: 1px solid yellow;
        }

    </style>

    <link rel="stylesheet" type="text/css" href="tree.css">
    <script src="DOM.js"></script>
    <script src='tree.js'></script>
</head>
<body>


<div class="title">tree</div>
<div class="content">
    <aside class="type-list"></aside>
    <div class="main">
        <div class=""></div>

    </div>
</div>


<script type="text/javascript">
    var $ = function query(argument) {
        return document.querySelectorAll(argument)[0];
    }

    var url = location.href;
    var left = $('.type-list');
    var right = $('.main');

    //生成树
    var tree = new Tree();
    var dom = tree.render();
    left.appendChild(dom);

    //获取url中有用的信息
    function getInfo(url) {
        var params = url.split('#!'), type, name;
        if (params.length > 1) {
            info = params[1].split('&'),
                    type = info[0].split('=')[1];
                    name = info[1].split('=')[1];
        }
        return {
            type: type,
            name: name
        }
    }

    //根据url hash 初始化页面
    function init() {
        var info = getInfo(location.href);
        var html = '';
        if (info.type && info.name) {
            html = Component[info.type][info.name]();
        } else {
            html = '<div>欢迎</div>';
        }
        right.innerHTML = html;

    }
    init();
    window.onhashchange = function (e) {
        init();
    }
</script>
</body>
</html>